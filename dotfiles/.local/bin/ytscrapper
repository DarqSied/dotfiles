#!/bin/sh
file=~/.config/ytfzf/subscriptions
numberofline=$(cat $file | wc -l)
count=0;
echo '' >> $file
echo '' >> $file
echo '' >> $file
echo '' >> $file
echo '' >> $file
echo '' >> $file

while [ $count -lt $numberofline ]
do
    ((count++))
    url=$(sed "${count}q;d" $file | sed 's|www.youtube.com|vid.puffyan.us|')
    realurl=$(sed "${count}q;d" $file )
    name=$(curl -s $url | grep "<title>" | sed 's|<title>||' | sed 's| - Invidious</title>||')
    echo $realurl \# $name >> $file
    echo $realurl \# $name
done

nvim $file
